{% extends 'base.html.twig' %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}

<div class="global-container">
    <div class="article_container">
    <div class="article-image adaptive-img--contain">
        <span>
            <img src="{{asset('uploads/articles/'~article.picture)}}" alt="image de l'article">
        </span>
    </div>
    <h1 class="article_title">{{ article.title }}</h1>

    <div class="article_info">
        <div class="categories_container">
            {% for category in article.category %}
            
                <div class="show_categories_container">
                <span class="show_categories">{{category.name}}</span>
                </div>
            {% endfor %}
        </div>
        <div class="article_author-date">
        <p>{{ article.user.username }}</p>
        <p>{{ article.publishedDate ? article.publishedDate|date('d-m-Y', 'Europe/Paris') : '' }}</p>
        </div>
    </div>

    <div class="article-content_container">
        <p>{{ article.content }}</p>
    </div>

    <a href="{{ path('app_articles_index') }}">Retour Ã  la liste des articles</a>

    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_articles_edit', {'id': article.id}) }}">Modifier</a>
    {% endif %}
 
    {{ include('articles/_delete_form.html.twig') }} 
</div>

<div class="comments-section_container">
    <h2 class="comments_title">Commentaires</h2>

    <div class="comments_container">
    {% for comment in article.comment %}
    <div class="comment">
        <div class="comment_info">
        <p>{{comment.user.username}}</p>
        <p>{{comment.publishedDate |date('d-m-Y H:i', 'Europe/Paris')}}</p>
        </div>
        <div class="comment_content">
        <p>{{comment.content}}</p>
        </div>
       
        {% if is_granted('ROLE_ADMIN') or comment.user == app.user%}
        <a href="{{ path('app_comments_edit', {'id': comment.id}) }}">Modifier</a>
        <a href="{{ path('app_comments_delete', {'id': comment.id}) }}">Supprimer</a>
        {% endif %}
    </div>
    {% endfor %}
    

    {% if app.user %}
    <h2>Laisser un commentaire</h2>
    {{ include('comments/_form.html.twig') }}
    {% endif %}
    </div>
</div>
</div>

{% endblock %}

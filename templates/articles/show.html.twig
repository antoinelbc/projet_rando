{% extends 'base.html.twig' %}

{% block title %}Articles{% endblock %}

{% block body %}
    <h1>Articles</h1>

    <img src="{{asset('uploads/articles/'~article.picture)}}" alt="#">
    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ article.id }}</td>
            </tr>
            <tr>
                <th>Titre</th>
                <td>{{ article.title }}</td>
            </tr>

            <tr>
                <th>Contenu</th>
                <td>{{ article.content }}</td>
            </tr>
            <tr>
                <th>Date de publication</th>
                <td>{{ article.publishedDate ? article.publishedDate|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Auteur</th>
                <td>{{ article.user.username }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('app_articles_index') }}">Retour</a>

    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_articles_edit', {'id': article.id}) }}">Modifier</a>
    {% endif %}
 
    {{ include('articles/_delete_form.html.twig') }}

    <h2>Cat√©gories de l'article</h2>
              
    {% for category in article.category %}
    <span>{{category.name}}</span>
    {% endfor %}

    <h2>Commentaires</h2>

    {% for comment in article.comment %}
        <p>{{comment.content}}</p>
        <p>{{comment.user.username}}</p>
        <p>{{comment.publishedDate}}</p>
        {% if is_granted('ROLE_ADMIN') or comment.user == app.user%}
        <a href="{{ path('app_comments_edit', {'id': comment.id}) }}">Modifier</a>
        <a href="{{ path('app_comments_delete', {'id': comment.id}) }}">Supprimer</a>
        {% endif %}
    {% endfor %}

    <h2>Laisser un commentaire</h2>
    {{ include('comments/_form.html.twig') }}


{% endblock %}
